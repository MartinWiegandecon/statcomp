# DIRECTORIES
setwd() = getwd()
# DIRECTORIES
directory = getwd()
setwd = directory
setwd(directory)
datapath = file.path(directory, "01_seminar_files/data")
# Clean workspace
rm(list = ls())
# DIRECTORIES
directory = getwd()
datapath = file.path(directory, "01_seminar_files/data")
# Required packages
packages <- c(
"eurostat",
"readxl",
"lubridate",
"tidyverse",
"dplyr"
)
lapply(packages[!(packages %in% installed.packages())], install.packages)
# Load all packages to library
lapply(packages, library, character.only = TRUE)
# AMBIGUOUS COMMANDS
select <- dplyr::select
read_excel(path = file.path(datapath, "/NUTS2021.xlsx"))
read_excel(path = file.path(datapath, "/NUTS2021.xlsx"),
sheet = "NUTS & SR 2021")
read_excel(path = file.path(datapath, "/NUTS2021.xlsx"),
sheet = "NUTS & SR 2021") %>%
colnames()
read_excel(path = file.path(datapath, "/NUTS2021.xlsx"),
sheet = "NUTS & SR 2021") %>%
rename(nuts_code = `Code 2021`,
country = Country,
nuts2_name = "NUTS level 2")
read_excel(path = file.path(datapath, "/NUTS2021.xlsx"),
sheet = "NUTS & SR 2021") %>%
rename(nuts_code = `Code 2021`,
country = Country,
nuts2_name = "NUTS level 2") %>%
filter(is.na(nuts2_name) == FALSE)
read_excel(path = file.path(datapath, "/NUTS2021.xlsx"),
sheet = "NUTS & SR 2021") %>%
rename(nuts_code = `Code 2021`,
nuts2_name = "NUTS level 2") %>%
filter(is.na(nuts2_name) == FALSE) %>%
select(nuts_code, nuts2_name)
read_excel(path = file.path(datapath, "/NUTS2021.xlsx"),
sheet = "NUTS & SR 2021") %>%
rename(nuts_code = `Code 2021`,
nuts2_name = "NUTS level 2") %>%
filter(is.na(nuts2_name) == FALSE) %>%
select(nuts_code, nuts2_name) %>%
mutate(country_iso2 = str_sub(nuts_code, 1, 2))
library(countrycode)
read_excel(path = file.path(datapath, "/NUTS2021.xlsx"),
sheet = "NUTS & SR 2021") %>%
rename(nuts_code = `Code 2021`,
nuts2_name = "NUTS level 2") %>%
filter(is.na(nuts2_name) == FALSE) %>%
mutate(country_iso2 = str_sub(nuts_code, 1, 2)) %>%
select(nuts_code, country, nuts2_name)
read_excel(path = file.path(datapath, "/NUTS2021.xlsx"),
sheet = "NUTS & SR 2021") %>%
rename(nuts_code = `Code 2021`,
nuts2_name = "NUTS level 2") %>%
filter(is.na(nuts2_name) == FALSE) %>%
mutate(country_iso2 = str_sub(nuts_code, 1, 2)) %>%
select(nuts_code, country_iso2, nuts2_name)
nuts2_df <- read_excel(path = file.path(datapath, "/NUTS2021.xlsx"),
sheet = "NUTS & SR 2021") %>%
rename(nuts_code = `Code 2021`,
nuts2_name = "NUTS level 2") %>%
filter(is.na(nuts2_name) == FALSE) %>%
mutate(country_iso2 = str_sub(nuts_code, 1, 2)) %>%
select(nuts_code, country_iso2, nuts2_name)
nuts2_df
nuts2_df %>%
group_by(country_iso2) %>%
count()
nuts2_df %>%
group_by(country_iso2) %>%
count() %>%
select(country_iso2) %>%
ungroup()
countrylist <- nuts2_df %>%
group_by(country_iso2) %>%
count() %>%
select(country_iso2) %>%
ungroup()
# Merge in full countryname
countrycode(countrylist, origin = 'iso2c', destination = 'country.name')
countryvec = countrylist$country_iso2
# Merge in full countryname
countrycode(countryvec, origin = 'iso2c', destination = 'country.name')
# Merge in full countryname
countrynames <- countrycode(countryvec, origin = 'iso2c', destination = 'country.name')
cbind(countryvec, countrynames)
cbind(countryvec, countrynames) %>%
as_tibble()
country_df <- cbind(countryvec, countrynames) %>%
as_tibble()
nuts2_df %>%
left_join(country_df, by = c("country_iso2" = "countryvec"))
nuts2_df %>%
left_join(country_df, by = c("country_iso2" = "countryvec")) %>%
select(nuts_code, countryname, nuts2_name)
# Merge in full countryname
countryname <- countrycode(countryvec, origin = 'iso2c', destination = 'country.name')
country_df <- cbind(countryvec, countryname) %>%
as_tibble()
nuts2_df %>%
left_join(country_df, by = c("country_iso2" = "countryvec")) %>%
select(nuts_code, countryname, nuts2_name)
nuts2_df %<>%
left_join(country_df, by = c("country_iso2" = "countryvec")) %>%
select(nuts_code, countryname, nuts2_name)
rm(countryvec, countrylist, countryname, country_df)
write_csv(nuts2_df, file = file.path(datapath, "nuts2_overview.csv"))
nuts2_df
View(nuts2_df)
countrylist <- nuts2_df %>%
group_by(country_iso2) %>%
count() %>%
select(country_iso2) %>%
ungroup()
countryvec = countrylist$country_iso2
nuts2_df <- read_excel(path = file.path(datapath, "/NUTS2021.xlsx"),
sheet = "NUTS & SR 2021") %>%
rename(nuts_code = `Code 2021`,
nuts2_name = "NUTS level 2") %>%
filter(is.na(nuts2_name) == FALSE) %>%
mutate(country_iso2 = str_sub(nuts_code, 1, 2)) %>%
select(nuts_code, country_iso2, nuts2_name)
countrylist <- nuts2_df %>%
group_by(country_iso2) %>%
count() %>%
select(country_iso2) %>%
ungroup()
countryvec = countrylist$country_iso2
# Merge in full countryname
countryname <- countrycode(countryvec, origin = 'eurostat', destination = 'country.name')
countryname
country_df <- cbind(countryvec, countryname) %>%
as_tibble()
nuts2_df %<>%
left_join(country_df, by = c("country_iso2" = "countryvec")) %>%
select(nuts_code, countryname, nuts2_name)
rm(countryvec, countrylist, countryname, country_df)
write_csv(nuts2_df, file = file.path(datapath, "nuts2_overview.csv"))
nuts2_df
View(nuts2_df)
